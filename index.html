<!DOCTYPE html>
<head>
  <meta charset="UTF-8" />
  <title>Alphabet</title>
  <style>
    body { font-family: monospace; text-align:center; margin-top:50px; }
    pre { font-size:16px; white-space: pre; }
  </style>
</head>
<body>
  <pre id="art"></pre>

  <script>
    const LETTER_ART = {
      'A': [
        "  XXX   ",
        "XX   XX ",
        "XXXXXXX ",
        "XX   XX ",
        "XX   XX "
      ],
      'B': [
        "XXXXX   ",
        "XX   XX ",
        "XXXXX   ",
        "XX   XX ",
        "XXXXX   "
      ],
      'C': [
        " XXXXXX ",
        "XX      ",
        "XX      ",
        "XX      ",
        " XXXXXX "
      ],
      'D': [
        "XXXXX   ",
        "XX   XX ",
        "XX   XX ",
        "XX   XX ",
        "XXXXX   "
      ],
      'E': [
        "XXXXXXX ",
        "XX      ",
        "XXXXXX  ",
        "XX      ",
        "XXXXXXX "
      ],
      'F': [
        "XXXXXXX ",
        "XX      ",
        "XXXXXX  ",
        "XX      ",
        "XX      "
      ],
      'G': [
        "  XXXXXX ",
        "XX       ",
        "XX   XXX ",
        "XX    XX ",
        "  XXXXXX "
      ],
      'H': [
        "XX   XX ",
        "XX   XX ",
        "XXXXXXX ",
        "XX   XX ",
        "XX   XX "
      ],
      'I': [
        "XXXXXXX ",
        "  XXX   ",
        "  XXX   ",
        "  XXX   ",
        "XXXXXXX "
      ],
      'J': [
        "     XX ",
        "     XX ",
        "     XX ",
        "XX   XX ",
        "  XXX   "
      ],
      'K': [
        "XX   XX ",
        "XX  XX  ",
        "XXXX    ",
        "XX  XX  ",
        "XX   XX "
      ],
      'L': [
        "XX      ",
        "XX      ",
        "XX      ",
        "XX      ",
        "XXXXXXX "
      ],
      'M': [
        "XX    XX ",
        "XXX  XXX ",
        "XX XX XX ",
        "XX    XX ",
        "XX    XX "
      ],
      'N': [
        "XX    XX ",
        "XXX   XX ",
        "XX XX XX ",
        "XX   XXX ",
        "XX    XX "
      ],
      'O': [
        " XXXXXX  ",
        "XX    XX ",
        "XX    XX ",
        "XX    XX ",
        " XXXXXX  "
      ],
      'P': [
        "XXXXXX  ",
        "XX   XX ",
        "XXXXXX  ",
        "XX      ",
        "XX      "
      ],
      'Q': [
        " XXXXXX  ",
        "XX    XX ",
        "XX    XX ",
        "XX  XXXX ",
        " XXXXXXX "
      ],
      'R': [
        "XXXXXX  ",
        "XX   XX ",
        "XXXXXX  ",
        "XX   XX ",
        "XX   XX "
      ],
      'S': [
        "  XXXXX ",
        "XX      ",
        "  XXX   ",
        "     XX ",
        "XXXXX   "
      ],
      'T': [
        "XXXXXXX ",
        "  XXX   ",
        "  XXX   ",
        "  XXX   ",
        "  XXX   "
      ],
      'U': [
        "XX   XX ",
        "XX   XX ",
        "XX   XX ",
        "XX   XX ",
        "XXXXXXX "
      ],
      'V': [
        "XX   XX ",
        "XX   XX ",
        "XX   XX ",
        "XX   XX ",
        "  XXX   "
      ],
      'W': [
        "XX      XX ",
        "XX      XX ",
        "XX      XX ",
        "XX  XX  XX ",
        "  XX  XX   "
      ],
      'X':[
        "XX   XX ",
        "XX   XX ",
        "  XXX   ",
        "XX   XX ",
        "XX   XX "
      ],
      'Y':[
        "XX   XX ",
        " XX XX  ",
        "  XXX   ",
        "  XXX   ",
        "  XXX   "
      ],
      'Z':[
        "XXXXXXX ",
        "     XX ",
        "   XX   ",
        " XX     ",
        "XXXXXXX "
      ]
    };

    let lines = [[]], currentChar = null, currentScale = 1, intervalId = null;
    const maxScale = 5, artEl = document.getElementById('art');

    document.addEventListener('keydown', (e) => {
      if (e.key === "Enter") {
        lines.push([]);
        renderAll();
        e.preventDefault();
        return;
      }
      const ch = e.key.toUpperCase();
      if (!LETTER_ART[ch] || currentChar) return;
      currentChar = ch; currentScale = 1;

      // 남은 인터벌 있다면 즉시 종료
      if (intervalId) {
        clearInterval(intervalId);
        intervalId = null;
      }

      intervalId = setInterval(() => {
        if (currentScale < maxScale) {
          currentScale++;
          renderAll();
        }
      }, 300);

      renderAll();
    });

    document.addEventListener('keyup', (e) => {
      const ch = e.key.toUpperCase();
      // 키 뗄 때 즉시 인터벌 종료
      if (intervalId) {
        clearInterval(intervalId);
        intervalId = null;
      }
      if (!LETTER_ART[ch] || ch !== currentChar) return;

      lines[lines.length - 1].push({ ch: currentChar, scale: currentScale });
      currentChar = null; currentScale = 1;
      renderAll();
    });

    function scaleColor(scale) {
      const minHue = 220, maxHue = 0;
      const hue = minHue + (maxHue - minHue) * ((scale - 1) / (maxScale - 1));
      return `hsl(${hue}, 80%, 55%)`;
    }

    function getPadLine(ch, length) {
      return `<span style="opacity:0">${ch.repeat(length)}</span>`;
    }

    function drawAscii(ch, scale) {
      const art = LETTER_ART[ch];
      const color = scaleColor(scale);
      let lines = [];
      for (const line of art) {
        let expanded = '';
        for (const c of line) {
          if (c === 'X')
            expanded += `<span style="color:${color}">${ch}</span>`.repeat(scale);
          else
            expanded += `<span style="opacity:0">${ch}</span>`.repeat(scale);
        }
        for (let i = 0; i < scale; i++) lines.push(expanded);
      }
      return lines;
    }

    function renderLine(lineArr, preview) {
      let arr = lineArr.slice();
      if (preview) arr.push(preview);
      const maxH = arr.reduce((a, b) => Math.max(a, b.scale), 1) * 5;
      let charArts = arr.map(({ ch, scale }) => {
        let art = drawAscii(ch, scale);
        let width = art[0].replace(/<[^>]+>/g, '').length;
        let pad = Array.from({ length: maxH - art.length }, () => getPadLine(ch, width));
        return art.concat(pad);
      });
      let result = [];
      for (let i = 0; i < maxH; i++) {
        result.push(charArts.map(a => a[i]).join(' '));
      }
      return result;
    }

    function renderAll() {
      let result = [];
      const lastIdx = lines.length - 1;
      for (let i = 0; i < lines.length; i++) {
        let preview = (i === lastIdx && currentChar)
          ? { ch: currentChar, scale: currentScale }
          : null;
        result = result.concat(renderLine(lines[i], preview));
      }
      artEl.innerHTML = result.join('\n');
    }
  </script>
</body>
</html>


