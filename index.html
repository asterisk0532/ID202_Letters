<!DOCTYPE html>
<head>
  <meta charset="UTF-8" />
  <title>Alphabet</title>
  <style>
    body { font-family: monospace; text-align:center; margin-top:50px; }
    pre { font-size:16px; white-space: pre; }
  </style>
</head>
<body>
  <h2>Alphabet (Press & Hold to ENLARGE)</h2>
  <pre id="art"></pre>

  <script>
    const LETTER_ART = {
      'A': [
        "  XXX   ",
        "XX   XX ",
        "XXXXXXX ",
        "XX   XX ",
        "XX   XX "
      ],
      'B': [
        "XXXXX   ",
        "XX   XX ",
        "XXXXX   ",
        "XX   XX ",
        "XXXXX   "
      ],
      'C': [
        " XXXXXX ",
        "XX      ",
        "XX      ",
        "XX      ",
        " XXXXXX "
      ],
      'D': [
        "XXXXX   ",
        "XX   XX ",
        "XX   XX ",
        "XX   XX ",
        "XXXXX   "
      ],
      'E': [
        "XXXXXXX ",
        "XX      ",
        "XXXXXX  ",
        "XX      ",
        "XXXXXXX "
      ],
      'F': [
        "XXXXXXX ",
        "XX      ",
        "XXXXXX  ",
        "XX      ",
        "XX      "
      ],
      'G': [
        "  XXXXXX ",
        "XX       ",
        "XX   XXX ",
        "XX    XX ",
        "  XXXXXX "
      ],
      'H': [
        "XX   XX ",
        "XX   XX ",
        "XXXXXXX ",
        "XX   XX ",
        "XX   XX "
      ],
      'I': [
        "XXXXXXX ",
        "  XXX   ",
        "  XXX   ",
        "  XXX   ",
        "XXXXXXX "
      ],
      'J': [
        "     XX ",
        "     XX ",
        "     XX ",
        "XX   XX ",
        "  XXX   "
      ],
      'K': [
        "XX   XX ",
        "XX  XX  ",
        "XXXX    ",
        "XX  XX  ",
        "XX   XX "
      ],
      'L': [
        "XX      ",
        "XX      ",
        "XX      ",
        "XX      ",
        "XXXXXXX "
      ],
      'M': [
        "XX    XX ",
        "XXX  XXX ",
        "XX XX XX ",
        "XX    XX ",
        "XX    XX "
      ],
      'N': [
        "XX    XX ",
        "XXX   XX ",
        "XX XX XX ",
        "XX   XXX ",
        "XX    XX "
      ],
      'O': [
        " XXXXXX  ",
        "XX    XX ",
        "XX    XX ",
        "XX    XX ",
        " XXXXXX  "
      ],
      'P': [
        "XXXXXX  ",
        "XX   XX ",
        "XXXXXX  ",
        "XX      ",
        "XX      "
      ],
      'Q': [
        " XXXXXX  ",
        "XX    XX ",
        "XX    XX ",
        "XX  XXXX ",
        " XXXXXXX "
      ],
      'R': [
        "XXXXXX  ",
        "XX   XX ",
        "XXXXXX  ",
        "XX   XX ",
        "XX   XX "
      ],
      'S': [
        "  XXXXX ",
        "XX      ",
        "  XXX   ",
        "     XX ",
        "XXXXX   "
      ],
      'T': [
        "XXXXXXX ",
        "  XXX   ",
        "  XXX   ",
        "  XXX   ",
        "  XXX   "
      ],
      'U': [
        "XX   XX ",
        "XX   XX ",
        "XX   XX ",
        "XX   XX ",
        "XXXXXXX "
      ],
      'V': [
        "XX   XX ",
        "XX   XX ",
        "XX   XX ",
        "XX   XX ",
        "  XXX   "
      ],
      'W': [
        "XX      XX ",
        "XX      XX ",
        "XX      XX ",
        "XX  XX  XX ",
        "  XX  XX   "
      ],
      'X':[
        "XX   XX ",
        "XX   XX ",
        "  XXX   ",
        "XX   XX ",
        "XX   XX "
      ],
      'Y':[
        "XX   XX ",
        " XX XX  ",
        "  XXX   ",
        "  XXX   ",
        "  XXX   "
      ],
      'Z':[
        "XXXXXXX ",
        "     XX ",
        "   XX   ",
        " XX     ",
        "XXXXXXX "
      ]
    };

    let lines = [[]]; // 각 줄별 {ch, scale} 배열
    let currentChar = null;
    let currentScale = 1;
    let intervalId = null;
    const maxScale = 8;

    const artEl = document.getElementById('art');

    document.addEventListener('keydown', (e) => {
      if (e.key === "Enter") {
        // 줄 바꾸기
        lines.push([]);
        renderAll();
        e.preventDefault();
        return;
      }
      const ch = e.key.toUpperCase();
      if (!LETTER_ART[ch]) return;
      if (currentChar === ch) return;
      currentChar = ch;
      currentScale = 1;

      intervalId = setInterval(() => {
        if (currentScale < maxScale) {
          currentScale++;
          renderAll();
        }
      }, 200);

      renderAll();
    });

    document.addEventListener('keyup', (e) => {
      const ch = e.key.toUpperCase();
      if (!LETTER_ART[ch]) return;
      if (ch !== currentChar) return;
      clearInterval(intervalId);
      intervalId = null;

      // 현재 줄에 기록
      lines[lines.length - 1].push({ ch: currentChar, scale: currentScale });
      currentChar = null;
      currentScale = 1;
      renderAll();
    });

    function drawAscii(ch, scale) {
      const art = LETTER_ART[ch];
      let lines = [];
      for (const line of art) {
        let expanded = '';
        for (const c of line) {
          expanded += c.repeat(scale);
        }
        for (let i = 0; i < scale; i++) {
          lines.push(expanded.replace(/X/g, ch));
        }
      }
      return lines;
    }

    // 한 줄에 입력된 모든 문자의 ascii art를 가로로 이어붙여 반환
    function renderLine(lineArr, preview) {
      if (lineArr.length === 0 && !preview) return [];
      // 미리보기 문자가 있을 수 있음
      let arr = [...lineArr];
      if (preview) arr.push(preview);
      // 최대 scale 파악하여 그 높이만큼 줄 만들기
      let maxHeight = arr.reduce((acc, cur) => Math.max(acc, cur.scale), 1) * 5;
      // 각 문자를 ascii art로 변환
      let charArts = arr.map(({ch, scale}) => {
        let art = drawAscii(ch, scale);
        let pad = Array(maxHeight - art.length).fill(' '.repeat(art[0].length));
        return art.concat(pad);
      });
      // 같은 줄끼리 합치기
      let result = [];
      for (let i = 0; i < maxHeight; i++) {
        result.push(charArts.map(a => a[i]).join(' '));
      }
      return result;
    }

    // 전체 화면을 ascii art로 만들어 출력
    function renderAll() {
      let result = [];
      for (let i = 0; i < lines.length; i++) {
        let preview = null;
        // 현재 줄이면서 현재 입력 중이면 미리보기 붙임
        if (i === lines.length - 1 && currentChar !== null)
          preview = {ch: currentChar, scale: currentScale};
        result = result.concat(renderLine(lines[i], preview));
      }
      artEl.textContent = result.join('\n');
    }
  </script>
</body>
</html>

